#!/bin/bash

set -e
set -u
set -x

REGISTRY="http://artifacts.eyeosbcn.com/nexus/content/repositories/npm-eyeos/"

MODULEDIR="$(cd "$(dirname "$0")" && pwd)"

cat <<TEXT


*************************************************
*************************************************
*************************************************
Building the module in $MODULEDIR
*************************************************
*************************************************
*************************************************

TEXT

cd "$MODULEDIR"
npm install

cat <<TEXT


*************************************************
*************************************************
*************************************************
Publishing to $REGISTRY
*************************************************
*************************************************
*************************************************
TEXT

npm publish --registry="$REGISTRY" .
